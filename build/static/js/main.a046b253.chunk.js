(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[4],{109:function(t,e,n){},112:function(t,e,n){"use strict";n.r(e);var r=n(3),c=n(0),a=n.n(c),o=n(20),s=n.n(o),u=n(24),i=n(12),b=n(71),j=(n(88),n(7)),l=n(132),d=n(42),O=(n(78),n(13)),f=n(29),g=n(45),h=Object(i.b)((function(t){return{isAuthenticated:O.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=t.redirectTo,a=Object(g.a)(t,["component","isAuthenticated","redirectTo"]);return Object(r.jsx)(j.b,Object(f.a)(Object(f.a)({},a),{},{render:function(t){return n?Object(r.jsx)(e,Object(f.a)({},t)):Object(r.jsx)(j.a,{to:c})}}))})),p=Object(i.b)((function(t){return{isAuthenticated:O.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=t.redirectTo,a=Object(g.a)(t,["component","isAuthenticated","redirectTo"]);return Object(r.jsx)(j.b,Object(f.a)(Object(f.a)({},a),{},{render:function(t){return n&&a.restricted?Object(r.jsx)(j.a,{to:c}):Object(r.jsx)(e,Object(f.a)({},t))}}))})),U=n(130),m=n(131),v={home:"/",register:"/register",login:"/login",contacts:"/contacts"},x=n(25),C=n.n(x);function k(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(u.b,{to:v.login,className:C.a.mainLink,activeClassName:C.a.mainLinkActive,children:"Login"}),Object(r.jsx)(u.b,{to:v.register,className:C.a.mainLink,activeClassName:C.a.mainLinkActive,children:"Registration"})]})}var S=n(133);var E=function(){var t=Object(i.d)(O.c.getUsername),e=Object(i.c)();return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:["Welcome, ",t]}),Object(r.jsx)(S.a,{variant:"contained",color:"primary",style:{marginLeft:10},onClick:function(){return e(O.a.logoutUser())},children:"Logout"})]})};var _=function(){var t=Object(i.d)(O.c.getIsAuthenticated);return Object(r.jsx)(U.a,{position:"sticky",children:Object(r.jsxs)(m.a,{className:C.a.mainNav,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(u.b,{to:v.home,exact:!0,className:C.a.mainLink,activeClassName:C.a.mainLinkActive,children:"Home"}),t&&Object(r.jsx)(u.b,{to:v.contacts,className:C.a.mainLink,activeClassName:C.a.mainLinkActive,children:"Contacts"})]}),t?Object(r.jsx)(E,{}):Object(r.jsx)(k,{})]})})},R=n(69),q=(n(109),Object(c.lazy)((function(){return n.e(2).then(n.bind(null,342))}))),y=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,346))})),L=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,343))})),w=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,344))}));var A=function(){var t=Object(i.d)(O.c.getError),e=Object(i.d)(O.c.getLoading),n=Object(i.c)();return Object(c.useEffect)((function(){n(O.a.getCurrentUser())}),[n]),Object(c.useEffect)((function(){t&&d.b.warn("\u041e\u0448\u0438\u0431\u043a\u0430! ".concat(t))}),[t]),Object(r.jsxs)(l.a,{maxWidth:"md",children:[Object(r.jsx)(_,{}),Object(r.jsx)(c.Suspense,{fallback:Object(r.jsx)("p",{children:"Loading..."}),children:Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:v.home,component:q,exact:!0}),Object(r.jsx)(p,{path:v.register,restricted:!0,component:w,redirectTo:v.contacts}),Object(r.jsx)(p,{path:v.login,restricted:!0,component:L,redirectTo:v.contacts}),Object(r.jsx)(h,{path:v.contacts,component:y,redirectTo:v.login}),Object(r.jsx)(j.b,{render:function(){return Object(r.jsx)("h1",{children:"Page not found"})}})]})}),Object(r.jsx)(d.a,{}),e&&Object(r.jsx)(R.a,{children:Object(r.jsx)("h1",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f..."})})]})},N=n(40),T=n(4),M=n(28),z=n(75),I=n.n(z),P=n(54),J=Object(N.a)(Object(T.d)({serializableCheck:{ignoredActions:[M.a,M.f,M.b,M.c,M.d,M.e]}})),W={key:"auth",storage:I.a,whitelist:["token"]},B=Object(T.a)({reducer:{contacts:P.c,auth:Object(M.g)(W,O.b)},middleware:J,devTools:!1}),F={store:B,persistor:Object(M.h)(B)};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(i.a,{store:F.store,children:Object(r.jsx)(b.a,{loading:null,persistor:F.persistor,children:Object(r.jsx)(u.a,{children:Object(r.jsx)(A,{})})})})}),document.getElementById("root"))},13:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return w}));var r=n(27),c=n.n(r),a=n(37),o=n(18),s=n.n(o),u=n(4),i={loginUserRequest:Object(u.b)("auth/loginUserRequest"),loginUserSuccess:Object(u.b)("auth/loginUserSuccess"),loginUserError:Object(u.b)("auth/loginUserError"),logoutUserRequest:Object(u.b)("auth/logoutUserRequest"),logoutUserSuccess:Object(u.b)("auth/logoutUserSuccess"),logoutUserError:Object(u.b)("auth/logoutUserError"),registrationUserRequest:Object(u.b)("auth/registrationUserRequest"),registrationUserSuccess:Object(u.b)("auth/registrationUserSuccess"),registrationUserError:Object(u.b)("auth/registrationUserError"),getCurrentUserRequest:Object(u.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(u.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(u.b)("auth/getCurrentUserError")};s.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var b,j,l,d,O,f=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},g=function(){s.a.defaults.headers.common.Authorization=""},h={loginUser:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(i.loginUserRequest()),e.prev=1,e.next=4,s.a.post("/users/login",t);case 4:r=e.sent,f(r.data.token),n(i.loginUserSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(i.loginUserError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},registrationUser:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(i.registrationUserRequest()),e.prev=1,e.next=4,s.a.post("/users/signup",t);case 4:r=e.sent,f(r.data.token),n(i.registrationUserSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(i.registrationUserError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logoutUser:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(i.logoutUserRequest()),t.prev=1,t.next=4,s.a.post("/users/logout");case 4:n=t.sent,g(),e(i.logoutUserSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(i.logoutUserError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),a=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return f(a),e(i.getCurrentUserRequest()),t.prev=5,t.next=8,s.a.get("/users/current");case 8:o=t.sent,e(i.getCurrentUserSuccess(o.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(i.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},p={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name},getError:function(t){return t.auth.error},getLoading:function(t){return t.auth.loading}},U=n(2),m=n(9),v={name:null,email:null},x=function(t,e){return e.payload.user},C=Object(u.c)(v,(b={},Object(U.a)(b,i.registrationUserSuccess,x),Object(U.a)(b,i.loginUserSuccess,x),Object(U.a)(b,i.logoutUserSuccess,(function(){return v})),Object(U.a)(b,i.getCurrentUserSuccess,(function(t,e){return e.payload})),b)),k=function(t,e){return e.payload.token},S=Object(u.c)(null,(j={},Object(U.a)(j,i.registrationUserSuccess,k),Object(U.a)(j,i.loginUserSuccess,k),Object(U.a)(j,i.logoutUserSuccess,(function(){return null})),j)),E=function(){return!0},_=function(){return!1},R=Object(u.c)(!1,(l={},Object(U.a)(l,i.registrationUserRequest,E),Object(U.a)(l,i.registrationUserSuccess,_),Object(U.a)(l,i.registrationUserError,_),Object(U.a)(l,i.loginUserRequest,E),Object(U.a)(l,i.loginUserSuccess,_),Object(U.a)(l,i.loginUserError,_),Object(U.a)(l,i.logoutUserRequest,E),Object(U.a)(l,i.logoutUserSuccess,_),Object(U.a)(l,i.logoutUserError,_),Object(U.a)(l,i.getCurrentUserRequest,E),Object(U.a)(l,i.getCurrentUserSuccess,_),Object(U.a)(l,i.getCurrentUserError,_),l)),q=function(t,e){return e.payload},y=Object(u.c)(null,(d={},Object(U.a)(d,i.registrationUserRequest,(function(){return""})),Object(U.a)(d,i.registrationUserSuccess,(function(){return""})),Object(U.a)(d,i.registrationUserError,q),Object(U.a)(d,i.loginUserRequest,(function(){return""})),Object(U.a)(d,i.loginUserSuccess,(function(){return""})),Object(U.a)(d,i.loginUserError,q),Object(U.a)(d,i.logoutUserRequest,(function(){return""})),Object(U.a)(d,i.logoutUserSuccess,(function(){return""})),Object(U.a)(d,i.logoutUserError,q),Object(U.a)(d,i.getCurrentUserRequest,(function(){return""})),Object(U.a)(d,i.getCurrentUserSuccess,(function(){return""})),Object(U.a)(d,i.getCurrentUserError,q),d)),L=Object(u.c)(!1,(O={},Object(U.a)(O,i.registrationUserSuccess,E),Object(U.a)(O,i.loginUserSuccess,E),Object(U.a)(O,i.logoutUserSuccess,_),Object(U.a)(O,i.getCurrentUserSuccess,E),Object(U.a)(O,i.registrationUserError,_),Object(U.a)(O,i.loginUserError,_),Object(U.a)(O,i.getCurrentUserError,_),O)),w=Object(m.c)({user:C,isAuthenticated:L,token:S,loading:R,error:y})},25:function(t,e,n){t.exports={mainLink:"Navigation_mainLink__oe2m4",mainLinkActive:"Navigation_mainLinkActive__1GlpT",mainNav:"Navigation_mainNav__3_a-7"}},52:function(t,e,n){t.exports={Modal__backdrop:"Modal_Modal__backdrop__mm_We",Modal__content:"Modal_Modal__content__1C4GJ"}},54:function(t,e,n){"use strict";n.d(e,"b",(function(){return v})),n.d(e,"d",(function(){return S})),n.d(e,"c",(function(){return A})),n.d(e,"a",(function(){return m}));var r,c,a=n(18),o=n.n(a),s=n(4),u=Object(s.b)("contacts/fetchContactsRequest"),i=Object(s.b)("contacts/fetchContactsSuccess"),b=Object(s.b)("contacts/fetchContactsError"),j=Object(s.b)("contacts/addContactRequest"),l=Object(s.b)("contacts/addContactSuccess"),d=Object(s.b)("contacts/addContactError"),O=Object(s.b)("contacts/editContactRequest"),f=Object(s.b)("contacts/editContactSuccess"),g=Object(s.b)("contacts/editContactError"),h=Object(s.b)("contacts/deleteContactRequest"),p=Object(s.b)("contacts/deleteContactSuccess"),U=Object(s.b)("contacts/deleteContactError"),m=Object(s.b)("contacts/changeFilter"),v={fetchContacts:function(){return function(t){t(u()),o.a.get("/contacts").then((function(e){var n=e.data;return t(i(n))})).catch((function(e){return t(b(e))}))}},addContact:function(t){return function(e){e(j()),o.a.post("/contacts",t).then((function(t){var n=t.data;return e(l(n))})).catch((function(t){return e(d(t))}))}},deleteContact:function(t){return function(e){e(h()),o.a.delete("/contacts/".concat(t)).then((function(){return e(p(t))})).catch((function(t){return e(U(t))}))}},editContact:function(t){return function(e){e(O());var n=t.id;delete t.id,o.a.patch("/contacts/".concat(n),t).then((function(t){var n=t.data;return e(f(n))})).catch((function(t){return e(g(t))}))}}},x=n(41),C=function(t){return t.contacts.items},k=function(t){return t.contacts.filter},S={getAllContacts:C,getFilter:k,getLoading:function(t){return t.contacts.loading},getVisibleContacts:Object(x.a)([C,k],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return-1!==t.name.toLowerCase().indexOf(n)}))}))},E=n(2),_=n(40),R=n(9),q=Object(s.c)([],(r={},Object(E.a)(r,i,(function(t,e){return e.payload})),Object(E.a)(r,l,(function(t,e){var n=e.payload;return[].concat(Object(_.a)(t),[n])})),Object(E.a)(r,p,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(E.a)(r,f,(function(t,e){var n=e.payload;return t.map((function(t){return t.id===n.id?n:t}))})),r)),y=Object(s.c)("",Object(E.a)({},m,(function(t,e){return e.payload}))),L=Object(s.c)(!1,(c={},Object(E.a)(c,u,(function(){return!0})),Object(E.a)(c,i,(function(){return!1})),Object(E.a)(c,b,(function(){return!1})),Object(E.a)(c,j,(function(){return!0})),Object(E.a)(c,l,(function(){return!1})),Object(E.a)(c,d,(function(){return!1})),Object(E.a)(c,O,(function(){return!0})),Object(E.a)(c,f,(function(){return!1})),Object(E.a)(c,g,(function(){return!1})),Object(E.a)(c,h,(function(){return!0})),Object(E.a)(c,p,(function(){return!1})),Object(E.a)(c,U,(function(){return!1})),c)),w=Object(s.c)(null,{}),A=Object(R.c)({items:q,filter:y,loading:L,error:w})},69:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(3),c=n(0),a=n(20),o=n(52),s=n.n(o),u=document.querySelector("#modal-root");function i(t){var e=t.children,n=t.onClose;Object(c.useEffect)((function(){var t=function(t){"Escape"===t.code&&n()};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[n]);return Object(a.createPortal)(Object(r.jsx)("div",{className:s.a.Modal__backdrop,onClick:function(t){t.currentTarget===t.target&&n()},children:Object(r.jsx)("div",{className:s.a.Modal__content,children:e})}),u)}},88:function(t,e,n){}},[[112,6,7]]]);
//# sourceMappingURL=main.a046b253.chunk.js.map